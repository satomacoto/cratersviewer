<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
<!--<link rel="stylesheet" href="basic.css" type="text/css" />-->
<script src="jquery-1.7.1.min.js"></script>
<script src="jquery.masonry.min.js"></script>
<script src="jquery.imagesloaded.min.js"></script>
<script src="jquery.simplemodal.1.4.2.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://www.kfsoft.info/MyThumbnail/jquery.MyThumbnail.js"></script>
<style type="text/css">
#simplemodal-overlay {background-color:#000;}
#simplemodal-container {background-color:#333; border:8px solid #444; padding:12px;}
h1 {
  font-size: 40px;
  font-family: helvetica;
  padding-left: 10px;
}
.item {
  width: 220px;
  margin: 10px;
  float: left;
}
.photo {
  max-width: 220px;
}
.note {
  color: #fff;
}
.myPic
{
  margin:10px;
  border-radius:10px;
  border:1px solid #ccc;
}
</style>
<script type="text/javascript">

// 緯度経度を設定する
function setLatLng(lat, lng){
  var pos = new google.maps.LatLng(lat, lng);
  map.setCenter(pos);
}

var map;

function initialize() {
    var latlng = new google.maps.LatLng(35.539001,134.228468);
    var opts = {
	zoom: 10,
	center: latlng,
	mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), opts);
}

$(function(){
  initialize();
  var $container = $('#container');
  $.getJSON("jcc.txt", function(data) {
    $.each(data, function(i, val) {
      if (this.imageurl == "no image") return;
      var div = $("<div/>").attr("class", "item").append($("<img>").attr("class", "photo").attr("src", this.imageurl));
      
      // 緯度経度の設定
      var lat = this.Latitude;
      lat = parseInt(lat.slice(0, lat.length - 1));
      var lng = this.Longitude;
      lng = parseInt(lng.slice(0, lng.length - 1));
      div.click(function() {
        $("#basic-modal-content").modal();
        setLatLng(lat, lng);
      });
      
      //div.append($("<div/>").attr("class", "note").html(this.name));

      $container.append(div);
      console.log(this);
    });
    $container.imagesLoaded(function(){
      $container.masonry({
        itemSelector : '.item',
        columnWidth : 240
      });
    });
    
    // filter and crop
    /*
    $(".photo").MyThumbnail({
      thumbWidth:200,
      thumbHeight:200,
      backgroundColor:"#ccc",
      imageDivClass:"myPic"
    });
    */    
  });
});
</script>
</head>
<body>
  <h1>craters</h1>
  <div id="basic-modal-content">
    <div id="map_canvas" style="width:400px; height:400px"></div>
  </div>
  <div id="container"></div>
</body>
</html>
